namespace = stt_startgame

country_event = { # Скрытый ивент инициализации
	id = stt_startgame.101
	title = stt_startgame.101.t
	desc = stt_startgame.101.d
	picture = ARTWORK_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	hidden = yes
	
	trigger = {
		NOT = { has_global_flag = game_mod_is_start }
	}
	immediate = {
	}
	option = {
		name = stt_startgame.101.1
		### СИСТЕМА ИНТЕГРАЦИИ ВАССАЛОВ ###
		every_subject_country = {
			limit = { 
				is_subject_of_type = vassal 
			}
			
			set_variable = { which = PreSent_integration_ADM value = 1 }
			set_variable = { which = PreSent_integration_DIP value = 1 }
			set_variable = { which = PreSent_integration_MIL value = 1 }
		}
		every_subject_country = {
			limit = { 
				NOT = { check_variable = { which = Years_as_Vassal value = 1 } }
				is_subject_of_type = vassal 
			}
			set_variable = { which = Years_as_Vassal value = 1 }
		}
		
		### ГОРОДА ЛИВОНСКОЙ КОНФЕДЕРАЦИИ и ЕПИСКОПСТВА В ПРУССИИ ###
		if = {
			limit = { 
				is_year = 1308
				NOT = { is_year = 1561 } 
			}
			36 = { 
				add_permanent_province_modifier = {
					name = city_Reval
					duration = -1
				}
				add_local_autonomy = 35
			}
			38 = { 
				add_permanent_province_modifier = {
					name = city_Riga
					duration = -1
				}
				add_local_autonomy = 80
			}
			1834 = { 
				add_permanent_province_modifier = {
					name = city_Dorpt
					duration = -1
				}
				add_local_autonomy = 50
			}
		}
		if = {
			limit = { 
				is_year = 1308
				NOT = { is_year = 1466 }
			}
			42 = { 
				add_permanent_province_modifier = {
					name = bishop_of_Varmia
					duration = -1
				}
				add_local_autonomy = 65
			}
			1859 = { 
				add_permanent_province_modifier = {
					name = bishop_of_Kulm
					duration = -1
				}
				add_local_autonomy = 25
			}
			3231 = { 
				add_permanent_province_modifier = {
					name = bishop_of_Sambia
					duration = -1
				}
				add_local_autonomy = 35
			}
		}
				
		### Модификаторы и эффекты культурной конверсии ###
		every_country = {
			limit = {
				exists = yes
				culture_group = germanic
				any_owned_province = { 
					NOT = { culture_group = owner } 
					province_group = german_ostsiedlung_group
				}
			}
			set_country_flag = country_of_ostsiedlung
			add_country_modifier = {
				name = is_ostsiedlung
				duration = -1
			}
		}
		
		# Стартовые значения культурной конверсии в Балтике
				## Пруссия
		if = {
			limit = { 40 = { NOT = { culture = prussian } } }
			40 = { # Мемель
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 15 } }
			}
		}
		if = {
			limit = { 41 = { NOT = { culture = prussian } } }
			41 = { # Кенигсберг
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 25 } }
			}
		}
		if = {
			limit = { 767 = { NOT = { culture = prussian } } }
			767 = { # Ортельсбург
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 7 } }
			}
		}
		if = { # Кульм
			limit = { 1859 = { NOT = { culture = prussian } } }
			hidden_effect = { 
				1859 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 15 } 
				} 
			}
		}
		if = {
			limit = { 3231 = { NOT = { culture = prussian } } }
			3231 = { # Инстербург
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 2 } }
			}
		}
		if = { 
			limit = { 4223 = { NOT = { culture = prussian } } }
			4223 = { # Лек
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 3 } }
			}
		}
		if = { 
			limit = { 4224 = { NOT = { culture = prussian } } }
			4224 = { # Тапиау
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 12 } }
			}
		}
		if = { 
			limit = { 4444 = { NOT = { culture = prussian } } }
			4444 = { # Рагнит
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 2 } }
			}
		}
		
				## Ливония
		if = {
			limit = { 
				NOT = { is_year = 1562 }
				38 = { NOT = { culture = ostzian } }
				3212 = { NOT = { culture = ostzian } }
				4283 = { NOT = { culture = ostzian } }
			}
			38 = { # Рига
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 15 } }
			}
			3212 = { # Кулдига
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 8 } }
			}
			4283 = { # Пернау
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 3 } }
			}
		}
		
				## Отдельные города на границе Германии
		if = { # Кольберг
			limit = { 48 = { NOT = { culture = pommeranian } } }
			hidden_effect = { 
				48 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 27 } 
				} 
			}
		}
		if = { # Штольп
			limit = { 2995 = { NOT = { culture = pommeranian } } }
			hidden_effect = { 
				2995 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 17 } 
				} 
			}
		}
		if = { # Кеслин
			limit = { 4126 = { NOT = { culture = pommeranian } } }
			hidden_effect = { 
				4126 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 22 } 
				} 
			}
		}
		if = { # Бутов
			limit = { 4445 = { NOT = { culture = pommeranian } } }
			4445 = { 
				add_province_modifier = {
					name = promote_ostsiedlung_1
					duration = -1
				}
				set_province_flag = ostsiedlung
				hidden_effect = { set_variable = { which = conversion_var value = 7 } }
			}
		}
		if = { # Барвальде
			limit = { 4446 = { NOT = { culture = pommeranian } } }
			hidden_effect = { 
				4446 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 25 } 
				} 
			}
		}
		if = { # Дойч-Кроне
			limit = { 4128 = { NOT = { culture = saxon } } }
			hidden_effect = { 
				4128 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 7 } 
				} 
			}
		}
		if = { # Драмбург
			limit = { 4447 = { NOT = { culture = saxon } } }
			hidden_effect = { 
				4447 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 35 } 
				} 
			}
		}
		if = { # Котзебус
			limit = { 4161 = { NOT = { culture = saxon } } }
			hidden_effect = { 
				4161 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 25 } 
				} 
			}
		}
		if = { # Хеб
			limit = { 4154 = { NOT = { culture = saxon } } }
			hidden_effect = { 
				4154 = { 
					add_province_modifier = {
						name = promote_ostsiedlung_1
						duration = -1
					}
					set_province_flag = ostsiedlung
					set_variable = { which = conversion_var value = 45 } 
				} 
			}
		}
		
		every_province = {
			limit = {
				area = south_saxony_area
				NOT = { culture_group = germanic }
			}
			set_province_flag = can_to_ostsiedlung
		}
		
		country_event = { id = stt_ostsiedlung.101 days = 180 }
		
		# Другое
		every_country = {
			limit = { always = yes }
			# Модификатор для отображения расходов на дипломатию
			add_country_modifier = {
				name = dip_expences_tooltip
				duration = -1
			}
			
			# Кол-во провинций под контролем немцев в Вост. Европе (для Ostsiedlung)
			# set_variable = { which = Provinces_of_EastEurope_owns_German value = 0 }
		}
		
		# Выдача провинциям оригинальных названий
		country_event = { id = stt_ostsiedlung.6 }
		
		set_global_flag = game_mod_is_start
	}
}

country_event = { # help for otto
	id = stt_startgame.1
	title = "stt_startgame.1.t"
	desc = "stt_startgame.1.d"

	picture = BATTLE_eventPicture
	
	hidden = yes
		
	trigger = { 
		OR = {
			tag = TU0
			tag = TUR
		}
		NOT = { is_year = 1453 }
		NOT = { started_in = 1400.1.1 }
		NOT = { total_development = 500 }
		ai = yes
		NOT = { has_country_modifier = osman_help }
	}
	
	immediate = { add_country_modifier = { name = osman_help duration = -1 } set_ai_personality = { personality = ai_militarist locked = yes }  }	
		
	option = {
	name = stt_startgame.1.a
	}
}
country_event = { #off help for otto
	id = stt_startgame.2 
	title = "stt_startgame.2.t"
	desc = "stt_startgame.2.d"

	picture = BATTLE_eventPicture

	hidden = yes
	mean_time_to_happen = { months = 1 }
	
	trigger = { 
		OR = {
			tag = TU0
			tag = TUR
		}
		OR = { 
			total_development = 600 
			num_of_cities = 40
			is_year = 1453
			ai = no
		}
		has_country_modifier = osman_help
	}
	
	immediate = { remove_country_modifier = osman_help set_ai_personality = { personality = ai_balanced locked = no } }	
		
	option = {
	name = stt_startgame.2.a
	}
}

#country_event = { #help for LIT
#	id = stt_startgame.3
#	title = "stt_startgame.3.t"
#	desc = "stt_startgame.3.d"
#
#	picture = BATTLE_eventPicture
#	hidden = yes
#		
#	trigger = { 
#		ai = yes
#		tag = LIT
#		NOT = { is_year = 1450 }
#		NOT = { started_in = 1400.1.1 }
#		NOT = { junior_union_with = POL }
#		NOT = { total_development = 350 }
#		NOT = { has_country_modifier = LIT_help }
#	}
#	
#	immediate = { add_country_modifier = { name = LIT_help duration = -1 } set_ai_personality = { personality = ai_militarist locked = yes } }	
#		
#	option = {
#	name = stt_startgame.3.a
#	}
#}

#country_event = { #off help for LIT
#	id = stt_startgame.4 
#	title = "stt_startgame.4.t"
#	desc = "stt_startgame.4.d"
#
#	picture = BATTLE_eventPicture
#
#	hidden = yes
#	mean_time_to_happen = { months = 1 }
#	
#	trigger = { 
#		OR = { 
#			total_development = 400 
#			num_of_cities = 25
#			is_year = 1450
#			junior_union_with = POL
#			ai = no
#		}
#		has_country_modifier = LIT_help
#	}
#	
#	immediate = { remove_country_modifier = LIT_help set_ai_personality = { personality = ai_balanced locked = no } }	
#		
#	option = {
#	name = stt_startgame.4.a
#	}
#}

country_event = { #dan' orde
	id = stt_startgame.5
	title = "stt_startgame.5.t"
	desc = "stt_startgame.5.d"

	picture = BATTLE_eventPicture
	hidden = yes
		
	trigger = { 
		is_subject_of_type = tributary_state
		culture_group = east_slavic
		NOT = { has_global_flag = knyaz_rights_flag_s }
	}
	
	immediate = { 
		add_country_modifier = { name = russian_tributaries duration = -1 } 
		if = { limit = { HUL = { ai = yes } } HUL = { add_country_modifier = { name = ai_boost_wall  duration = -1 } } }
	}	
		
	option = {
	name = stt_startgame.5.a
	}
}

country_event = { #off dan' orde
	id = stt_startgame.6 
	title = "stt_startgame.6.t"
	desc = "stt_startgame.6.d"

	picture = BATTLE_eventPicture

	hidden = yes
	mean_time_to_happen = { months = 1 }
	
	trigger = { 
		OR = {
			NOT = { is_subject_of_type = tributary_state }
			has_global_flag = knyaz_rights_flag_s
		}
		has_country_modifier = russian_tributaries
	}
	
	immediate = { remove_country_modifier = russian_tributaries }	
		
	option = {
	name = stt_startgame.6.a
	}
}

country_event = { #achivki
	id = stt_startgame.7
	title = "stt_startgame.7.t"
	desc = "stt_startgame.7.d"

	picture = BATTLE_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	
	trigger = { 
		ai = no
		ironman = yes
	}
		
	option = {
		name = stt_startgame.7.a
		set_global_flag = stt_achievements
	}
	
	option = {
		name = stt_startgame.7.b
		add_prestige = -1
	}
}

country_event = { #up proizvodit
	id = stt_startgame.8
	title = "stt_startgame.8.t"
	desc = "stt_startgame.8.d"

	picture = BATTLE_eventPicture
	fire_only_once = yes
	
	mean_time_to_happen = { months = 1 }
	
	trigger = { 
		ai = no
		has_leader = "Admin"
		ironman = no
		NOT = { any_country = { ai = no NOT = { tag = ROOT } } }
	}
		
	option = {
		name = stt_startgame.8.a
		every_province = { limit = { continent = south_america NOT = { owned_by = CSU } is_city = yes } add_core = CSU cede_province = CSU }
		every_province = { limit = { continent = north_america NOT = { owned_by = AZT } is_city = yes } add_core = AZT cede_province = AZT change_religion = totemism }
		AZT = { change_religion = totemism }
	}
	
	option = {
		name = stt_startgame.8.aa
		every_province = { limit = { continent = south_america NOT = { owned_by = CSU } } add_core = CSU cede_province = CSU }
		every_province = { limit = { continent = north_america NOT = { owned_by = AZT } } add_core = AZT cede_province = AZT change_religion = totemism }
		AZT = { change_religion = totemism }
	}
	
	option = {
		name = stt_startgame.8.b
	}
}

country_event = { #help for unite russia
	id = stt_startgame.9
	title = "stt_startgame.9.t"
	desc = "stt_startgame.9.d"

	picture = BATTLE_eventPicture
	hidden = yes
	mean_time_to_happen = { months = 1 }
	fire_only_once = yes
		
	trigger = { 
		ai = no
		#any_country = { 
		#	culture = russian 
		#	religion_group = christian 
		#	total_development = 50 
		#	NOT = { junior_union_with = POL }
		#}
		NOT = {
			capital_scope = { 
				region = russia_region
			}
		}
		NOT = { is_year = 1500 }
		NOT = { started_in = 1430.1.1 }
		#NOT = { has_country_modifier = stt_rusland_help }
		NOT = { any_country = { has_country_modifier = stt_rusland_help } }
		#OR = {
		#	NOT = {
		#		religion_group = christian 
		#		culture = russian
		#	} 
		#}
	}
	
	immediate = { 
		random_list = {
            60 = {
				MOS = { add_country_modifier = { name = stt_rusland_help duration = -1 } set_ai_personality = { personality = ai_militarist locked = yes } }
            }
            25 = {
				TVE = { add_country_modifier = { name = stt_rusland_help duration = -1 } set_ai_personality = { personality = ai_militarist locked = yes } }
            }
            15 = {
				random_country = { 
					limit = { 
						culture = russian 
						num_of_cities = 2 
						NOT = { junior_union_with = POL }
					} 
					add_country_modifier = { 
						name = stt_rusland_help 
						duration = -1 
					} 
					set_ai_personality = { personality = ai_militarist locked = yes } 
				} 
            }	
        }
	}	
		
	option = {
		name = stt_startgame.9.a
	}
}

country_event = { #off help for unite russia
	id = stt_startgame.12 
	title = "stt_startgame.12.t"
	desc = "stt_startgame.12.d"

	picture = BATTLE_eventPicture

	hidden = yes
	mean_time_to_happen = { months = 1 }
	
	trigger = { 
		OR = { 
			total_development = 450 
			num_of_cities = 60
			is_year = 1500
			ai = no
		}
		has_country_modifier = stt_rusland_help
	}
	
	immediate = { remove_country_modifier = stt_rusland_help set_ai_personality = { personality = ai_balanced locked = no } }	
		
	option = {
		name = stt_startgame.12.a
	}
}

country_event = { # cavalry cost on
    id = stt_startgame.10
	title = stt_startgame.10.t
	desc = stt_startgame.10.d
	
	picture = SIEGE_eventPicture
	   	
	mean_time_to_happen = { months = 12 }
	
	trigger = {
		current_age = age_of_feudalism
		NOT = { has_country_modifier = stt_cavalry_cost_1 }
		NOT = { has_country_modifier = stt_cavalry_cost_2 }
		NOT = { has_country_modifier = stt_cavalry_cost_3 }
	} 
	
	option = {
        name = stt_startgame.10.a
		add_yearly_manpower = -0.25
		if = { 
			limit = { 
				capital_scope = { continent = europe }
				NOT = { has_reform = steppe_horde } 
			} 
			add_country_modifier = { name = stt_cavalry_cost_1 duration = -1 }
		}
		else_if = {
            limit = {
				capital_scope = { continent = asia }
				capital_scope = { continent = africa }
				NOT = { has_reform = steppe_horde }
            }
			add_country_modifier = { name = stt_cavalry_cost_2 duration = -1 }
        }
		else = {
			add_country_modifier = { name = stt_cavalry_cost_3 duration = -1 }
		}
		custom_tooltip = stt_cavalry_cost_tooltip
	}
}

country_event = { # cavalry cost off
    id = stt_startgame.11
	title = stt_startgame.11.t
	desc = stt_startgame.11.d
	
	picture = SIEGE_eventPicture
	    
	mean_time_to_happen = { months = 1 }
	
	trigger = {
		OR = {
			has_country_modifier = stt_cavalry_cost_1
			has_country_modifier = stt_cavalry_cost_2
			has_country_modifier = stt_cavalry_cost_3
		}
		NOT = { current_age = age_of_feudalism }
	} 
	
	option = {
        name = stt_startgame.11.a
		remove_country_modifier = stt_cavalry_cost_1
		remove_country_modifier = stt_cavalry_cost_2
		remove_country_modifier = stt_cavalry_cost_3
	}
}
