namespace = wallachia

# Соглашение Мирчи и Баязида
country_event = {
	id = wallachia.1
	title = "wallachia.1"
	desc = "wallachia.1.desc"
	picture = WOUNDED_SOLDIERS_eventPicture
	fire_only_once = yes

	trigger = {
		tag = WAL
		is_vassal = no
		OR = {
			is_neighbor_of = TU0
			is_neighbor_of = TUR
		}
	}
	mean_time_to_happen = {
		months = 1
	}
	option = { # Подписать соглашение
		name = "wallachia.1.a"
		ai_chance = { factor = 75 }
		HUN = {
			country_event = { id = wallachia.2 }
		}
		if = {
			limit = {
				exists = TUR 
			}
			TUR = { vassalize = WAL }
		}
		if = {
			limit = {
				exists = TU0 
			}
			TU0 = { vassalize = WAL }
		}
	}
	option = { # Отвергнуть предложение
		name = "wallachia.1.b"	
		ai_chance = { factor = 25 }
		HUN = {
			declare_war_with_cb = {
				who = WAL
				casus_belli = cb_annex
			}
		}
		if = {
		limit = {
			exists = TU0
			}
			TU0 = {
				declare_war_with_cb = {
					who = WAL
					casus_belli = cb_vassalize_mission
				}
			}
		}
		if = {
		limit = {
			exists = TUR
			}
			TUR = {
				declare_war_with_cb = {
					who = WAL
					casus_belli = cb_vassalize_mission
				}
			}
		}
	}
}

# Реакция Венгерской короны на вассализацию Валахии
country_event = {
	id = wallachia.2
	title = "wallachia.2"
	desc = "wallachia.2.desc"
	picture = WOUNDED_SOLDIERS_eventPicture
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		tag = HUN
	}
	mean_time_to_happen = {
		months = 1
	}
	option = { # Объявить войну турецким прихвостням
		name = "wallachia.2.a"
		ai_chance = { factor = 25 }
		HUN = {
			declare_war_with_cb = {
				who = WAL
				casus_belli = cb_annex
			}
		}
	}
	option = { # Пускай живут..пока что
		name = "wallachia.2.b"
		ai_chance = { factor = 75 }
		HUN = {
			add_casus_belli = {
    			target = WAL
    			type = cb_annex
    			months = 12
			}
		}
	}
}

#Султан требует подтверждения верности
country_event = {
	id = wallachia.3
	title = "wallachia.3"
	desc = "wallachia.3.desc"
	picture = WOUNDED_SOLDIERS_eventPicture
	fire_only_once = no

	trigger = {
		tag = WAL
		WAL = {
			is_vassal = yes
			heir_age = 4
			NOT = {
				has_ruler_modifier = the_heir_in_captivity
			}
		}
	}
	mean_time_to_happen = {
		months = 1
	}
	option = { # Выказать лояльность султану
		name = "wallachia.3.a"
		ai_chance = { factor = 75 }
		WAL = {
			add_ruler_modifier = {
					name = "the_heir_in_captivity"
					duration = -1
			}
			add_manpower = -3
		}
	}
	option = { # Попытаться переубедить прихвостней Порты
		name = "wallachia.3.b"	
		ai_chance = { factor = 25 }
		WAL = {
			add_manpower = -6
			add_treasury = -200
		}
	}
}

#Смерть наследника
country_event = {
	id = wallachia.4
	title = "wallachia.4"
	desc = "wallachia.4.desc"
	picture = WOUNDED_SOLDIERS_eventPicture
	fire_only_once = no

	trigger = {
		tag = WAL
		WAL = {
			has_ruler_modifier = the_heir_in_captivity
			OR = {
				offensive_war_with = TUR
    				offensive_war_with = TU0
			}
		}
	}

	option = { # Мой сын!
		name = "wallachia.4.a"
		ai_chance = { factor = 100 }
		WAL = {
			remove_ruler_modifier = the_heir_in_captivity
			kill_heir = yes
		}
	}
}